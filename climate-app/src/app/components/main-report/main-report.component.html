<div class="main-report-container">
  <header class="report-header">
    <h1>ESG Main Report</h1>
    <div class="report-stats">
      <span class="total-reports">Total Reports: {{ totalReports() }}</span>
    </div>
  </header>

  @if (isLoading()) {
    <div class="loading-state">
      <p>Loading reports...</p>
    </div>
  } @else if (hasReports()) {
    <div class="reports-content">
      <div class="reports-list">
        <h2>Reports</h2>
        @for (report of reports(); track report.account) {
          <div 
            class="report-card"
            [class.selected]="selectedReport()?.account === report.account"
            (click)="selectReport(report)">
            <div class="report-basic-info">
              <h3>{{ report.accountName }}</h3>
              <p class="account-number">Account: {{ report.account }}</p>
              <p class="customer-rating">Rating: {{ report.customerRating }}</p>
            </div>
            <div class="report-climate-info">
              <span 
                class="climate-indicator"
                [class.green]="report.climateColor === 'green'"
                [class.yellow]="report.climateColor === 'yellow'"
                [class.red]="report.climateColor === 'red'">
                {{ report.climateColor }}
              </span>
              <span class="climate-count">Count: {{ report.climateCount }}</span>
            </div>
          </div>
        }
      </div>

      @if (selectedReport()) {
        <div class="report-details">
          <div class="details-header">
            <h2>Report Details</h2>
            <button class="close-btn" (click)="clearSelection()">Ã—</button>
          </div>
          <div class="details-content">
            <div class="detail-group">
              <label>Bank ID:</label>
              <span>{{ selectedReport()!.bank }}</span>
            </div>
            <div class="detail-group">
              <label>Branch ID:</label>
              <span>{{ selectedReport()!.branch }}</span>
            </div>
            <div class="detail-group">
              <label>Account:</label>
              <span>{{ selectedReport()!.account }}</span>
            </div>
            <div class="detail-group">
              <label>Account Name:</label>
              <span>{{ selectedReport()!.accountName }}</span>
            </div>
            <div class="detail-group">
              <label>Customer Rating:</label>
              <span>{{ selectedReport()!.customerRating }}</span>
            </div>
            <div class="detail-group">
              <label>Climate Count:</label>
              <span>{{ selectedReport()!.climateCount }}</span>
            </div>
            <div class="detail-group">
              <label>Branch Classification:</label>
              <span>{{ selectedReport()!.branchClassification }}</span>
            </div>
            <div class="detail-group">
              <label>Classification Description:</label>
              <span>{{ selectedReport()!.branchClassificationDescription }}</span>
            </div>
            <div class="detail-group">
              <label>Climate Color:</label>
              <span 
                class="climate-badge"
                [class.green]="selectedReport()!.climateColor === 'green'"
                [class.yellow]="selectedReport()!.climateColor === 'yellow'"
                [class.red]="selectedReport()!.climateColor === 'red'">
                {{ selectedReport()!.climateColor }}
              </span>
            </div>
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="empty-state">
      <p>No reports available</p>
    </div>
  }
</div>
