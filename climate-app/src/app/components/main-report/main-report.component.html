<div class="main-report-container">
  <header class="report-header">
    <h1>ESG Main Report</h1>
    <div class="report-stats">
      <span class="total-reports">Total Reports: {{ totalReports() }}</span>
    </div>
  </header>

  @if (isLoading()) {
    <div class="loading-state">
      <p>Loading reports...</p>
    </div>
  } @else if (error()) {
    <div class="error-state">
      <p>Error loading reports: {{ error() }}</p>
    </div>
  } @else if (hasReports()) {
    <div class="reports-list">
      <div class="list-header">
        <div class="header-cell">Account Name</div>
        <div class="header-cell">Account</div>
        <div class="header-cell">Bank</div>
        <div class="header-cell">Branch</div>
        <div class="header-cell">Rating</div>
        <div class="header-cell">Total Credit Risk</div>
        <div class="header-cell">Branch Classification</div>
        <div class="header-cell">Climate Status</div>
      </div>
      
      @for (report of reports(); track report.account) {
        <div class="list-row">
          <div class="list-cell account-name">{{ report.accountName }}</div>
          <div class="list-cell">{{ report.account }}</div>
          <div class="list-cell">{{ report.bank }}</div>
          <div class="list-cell">{{ report.branch }}</div>
          <div class="list-cell rating">{{ getCustomerRatingString(report.customerRating) }}</div>
          <div class="list-cell">{{ report.totalCreditRisk }}</div>
          <div class="list-cell classification">
            <span class="classification-code">{{ report.branchClassificationCode }}</span>
            <span class="classification-desc">{{ report.branchClassificatonDescription }}</span>
          </div>
          <div class="list-cell climate-status">
            <span 
              class="climate-badge"
              [class.green]="getClimateColorString(report.climateColor) === 'green'"
              [class.yellow]="getClimateColorString(report.climateColor) === 'yellow'"
              [class.red]="getClimateColorString(report.climateColor) === 'red'">
              {{ getClimateColorString(report.climateColor) }}
            </span>
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="empty-state">
      <p>No reports available</p>
    </div>
  }
</div>
